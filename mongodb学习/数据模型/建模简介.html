<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>
<body>
    <h1>数据建模简介</h1>
    <ul>
        <li>
            应用程序的需求
        </li>
        <li>
            数据检索模式
        </li>
        <li>
            数据库引擎的性能
        </li>
        <li>
            综合来看就是数据的应用和程序的使用情况（查询，更新和数据处理）
        </li>
        <li>
            取决于数据本身以及mg本身的特性
        </li>
    </ul>
    <h1>文档结构</h1>
    <ul>
        <li>
            引用：把输入的数据按照某种分类存起来，尽量做到扁平化，等需要的时候在把他组装起来。进行返回
            <ul>
                <li>
                    引用通过包含从一个文档到另一个文档的链接或引用来存储数据之间的关系。应用程序可以通过解析这些引用来访问相关数据。比如共同的userId
                </li>
                <li>
                    使用场景
                    <ul>
                        <li>
                            当嵌入导致数据重复，但是不能提供足够多的性能优势来超过重复的影响。
                        </li>
                        <li>
                            更加复杂的多对多的关系
                        </li>
                        <li>
                            建模大型分层数据
                        </li>
                        <li>
                            需要更加灵活的使用场景
                        </li>
                    </ul>
                </li>
                <li>
                    缺点：
                    <ul>
                        <li>
                            规范的数据模型需要客户端发出后续的查询来解析引用，可能需要更多的往返服务器。
                        </li>
                    </ul>
                </li>
            </ul>
        </li>
        <li>
            嵌入式文档
            <ul>
                <li>
                    通过在单个文档中存储相关的数据来捕获数据间的关系，mg可以将文档结构嵌入文档中的字段或数组中
                </li>
                <li>
                    仅仅需要一个查询来解析引用。
                </li>
                <li>
                    嵌入为读取操作提供给了更好的性能，以及在单个数据库操作中请求和检索相关数据的能力，嵌入数据模型可以在单个原子写入操作中更新相关数据
                </li>
                <li>
                    缺点：
                    <ul>
                        <li>
                            导致文档在创建之后增长的情况。文档增长会影响写入性能并导致数据碎片化
                        </li>
                    </ul>
                </li>
            </ul>
        </li>
    </ul>
    <h1>写操作的原子性</h1>
    <ul>
        <li>
            具有嵌入数据的非规格化数据模型将单个文档中表示实体的所有相关数据结合在一起。有利于原子写入操作，单个原子的写入操作可以插入或更新实体的数据。
        </li>
        <li>
            规范化数据会将数据拆分成多个原子集合，并且需要多个不是原子集合的写入操作。
        </li>
        <li>
            过分的强调原子的写入模式可能会限制应用程序的使用数据的方式，也可能限制修改应用程序的方式
        </li>
    </ul>
</body>
</html>