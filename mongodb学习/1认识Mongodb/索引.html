<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>
<body>
    <h1>索引</h1>
    <ul>
        <li>
            MD采用基于代价的优化模型，对每一个提交的有关的查询，决定使用哪一个索引和是否使用索引。在适当的地方添加索引，从不合理的地方删除次优的索引，有助于优化那些性能较差的应用。
            合理的索引是都各种查询的分析和预测，只有正确的使索引和程序结合起来，才能产生最好的优化方案。
        </li>
        <li>
            不使用索引，那么查询数据的时候都是全盘扫描，使用索引可以很好的避免这个问题
        </li>
        <li>
            索引优化原则
            <ul>
                <li>
                    在索引中包含条件的所有列，可以使用索引形成的屏蔽来拒绝集合中不合格的行
                </li>
                <li>
                    对于需要排序的引用列，适当的建立索引可以避免排序
                </li>
                <li>
                    避免在索引中使用多于5个列
                </li>
                <li>
                    对于多列索引，将查询中引用次数最多的列放在定义的前面
                </li>
                <li>
                    不要再索引中包含经常修改的或进行插入，删除的列
                </li>
            </ul>
        </li>
    </ul>


    <h1>
        索引操作
    </h1>
    <ul>
        <li>
            索引是凌驾于数据库存储系统上的另一层系统，因此各种结构迥异的数据库的索引实现及使用都是大同小异
        </li>
        <li>
            基础索引：在表上为某一列建立索引，并指定表数据是按这一列升序还是降序排列。默认有一个索引是_id_,不可被删除
        </li>
        <li>
            在默认情况下：创建索引的时候会阻塞其他操作直到索引创建完毕，现在有一种后台创建索引的方式。采用这种方法，其他的读写操作仍然可以同步执行，不会产生阻塞情况
        </li>
        <li>
            不仅可以在普通字段上建立索引，还可以在嵌入式文档类型的字段上建立索引。
        </li>
        <li>
            组合索引：当查询语句需要返回的字段在组合索引中的时候，数据库将不会访问数据页，而是直接返回索引中的字段值。
        </li>
        <li>
            唯一索引：索引可以用于强迫所有字段数值的唯一性，或者多个字段的唯一性。
        </li>
        <li>
            查询是数据库常见的操作：不同的查询操作的速度是不同的，索引并不是最快的，在查询的时候，要根据速度快的原则来选择是否使用索引查询。
        </li>
        <li>
            删除索引：
            <ul>
                <li>
                    删除表的所有索引
                </li>
                <li>
                    删除表的单个索引
                </li>
            </ul>
        </li>
        <li>
            重建索引：当collection大量删除的时候，磁盘空间并不会自动收回，长期这样会产生大量的磁盘碎片，影响磁盘读取性能，所以数据索引需要周期性的重建。
        </li>
        <li>
            explain:查看执行计划，对一个查询任务做出一个如何完成任务的详细方案。获知系统是如何处理查询请求，并能很好的观察系统如何使用索引来加快检索速度。使我们有针对性的优化索引。
        </li>
    </ul>
</body>
</html>